version: 0.2

phases:
  install:
    runtime-versions:
      java: corretto11
    commands:
      - echo Installing Liquibase...
      - curl -LO https://github.com/liquibase/liquibase/releases/download/v4.28.0/liquibase-4.28.0.tar.gz
      - tar -xvzf liquibase-4.28.0.tar.gz
      - mv liquibase /opt/liquibase
      - ln -s /opt/liquibase/liquibase /usr/local/bin/liquibase
      - echo "Liquibase installed to /usr/local/bin"
  build:
    commands:
      - echo Running Liquibase migration...
      - liquibase --defaultsFile=liquibase.properties update
